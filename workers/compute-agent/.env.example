# ==============================================================================
# tseeder-agent — Environment Variables Template (VM / systemd deployment)
# Copy to /etc/tseeder-agent.env and fill in all values before starting.
#
#   sudo cp .env.example /etc/tseeder-agent.env
#   sudo chown root:tseeder-agent /etc/tseeder-agent.env
#   sudo chmod 640 /etc/tseeder-agent.env
#   sudo nano /etc/tseeder-agent.env
#
# NEVER commit this file with real secrets to version control.
# ==============================================================================

# ── Agent identity ─────────────────────────────────────────────────────────────
# Unique name for this agent. Appears in logs and the orchestrator registry.
# Use a descriptive name: agent-hetzner-fsn1-1, agent-aws-us-east-1, etc.
WORKER_ID=agent-vm-1

# TCP port this agent listens on.
# If running multiple agents on one VM, use different ports: 8787, 8788, 8789…
PORT=8787

# ── Cloudflare Worker authentication ──────────────────────────────────────────
# Bearer token the Cloudflare Worker includes in every request to this agent.
# Must match WORKER_CLUSTER_TOKEN in your Workers API secrets.
# Generate: openssl rand -hex 32
WORKER_CLUSTER_TOKEN=

# HMAC secret used to sign callback requests this agent sends to the Worker.
# Must match CALLBACK_SIGNING_SECRET in your Workers API secrets.
# Generate: openssl rand -hex 32
CALLBACK_SIGNING_SECRET=

# ── Cloudflare R2 Storage ─────────────────────────────────────────────────────
# S3-compatible R2 endpoint.
# Format: https://<ACCOUNT_ID>.r2.cloudflarestorage.com
R2_ENDPOINT=

# R2 bucket name (must match R2_BUCKET_NAME in your Workers API config).
R2_BUCKET=rdm-files

# R2 API credentials.
# Generate from: Cloudflare Dashboard → R2 → Manage R2 API Tokens
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=

# ── Download behaviour ────────────────────────────────────────────────────────
# Local directory where torrents are downloaded before uploading to R2.
# Must be writable by the tseeder-agent user.
DOWNLOAD_DIR=/var/lib/tseeder-agent/downloads

# Maximum number of torrent jobs to run simultaneously on this agent.
# Increase on machines with more CPU/RAM/disk bandwidth.
MAX_CONCURRENT_JOBS=10

# ── Optional / advanced ────────────────────────────────────────────────────────
# Log verbosity: trace | debug | info | warn | error   (default: info)
# LOG_LEVEL=info

# How long (seconds) presigned R2 upload URLs remain valid.
# Increase for very large files (>50 GB) on slow connections.  (default: 3600)
# PRESIGNED_URL_TTL_SECONDS=3600
